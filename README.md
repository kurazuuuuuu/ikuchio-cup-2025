# ikuchio-cup-2025
## ã‚¢ã‚¤ãƒ‡ã‚¢ï¼šï¼’ï¼”æ™‚é–“ã§ã•ã‚ˆã†ãªã‚‰

- 24æ™‚é–“ã«ä¸€åº¦ã€æ—¥ä»˜ãŒå¤‰ã‚ã‚‹ã¨åŒæ™‚ã«è¨ªã‚Œã‚‹æ°¸é ã‹ã‚‚ã—ã‚Œãªã„ãŠåˆ¥ã‚Œ  
- ã‚ãªãŸã¯æ¯æ—¥ã“ã®ä¸–ç•Œä¸­ã®ã©ã“ã®èª°ã‹ã‚ã‹ã‚‰ãªã„ç›¸æ‰‹ã¨å‡ºä¼šã†ã“ã¨ãŒã§ãã‚‹ã€‚ã—ã‹ã—ã€ä¸ãˆã‚‰ã‚ŒãŸã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ‰‹æ®µã¯ä¸€ã¤ã ã‘  
- äººã¨äººãŒç›´æ¥ä¼šè©±ã™ã‚‹ã“ã¨ã¯ã§ããšã€ã‚·ã‚¹ãƒ†ãƒ ï¼ˆAIï¼‰ã‚’ä»‹ã—ã¦ã®ã¿å¯¾è©±ã‚’è©¦ã¿ã‚‹ã“ã¨ãŒã§ãã‚‹  
- ãã®æ—¥ã‚ã£ãŸå‡ºæ¥äº‹ã‚„ãµã¨ã—ãŸã“ã¨ã‚’æ›¸ã„ã¦ãŠã‘ã°ã‚ã¡ã‚ƒã‚ã¡ã‚ƒè©±åºƒã’ã¦ãã‚Œã¦ã‹ã¤å€‹äººã«é–¢ã‚ã‚‹å†…å®¹ã¯éš ã—ã¤ã¤ç›¸æ‰‹ã«é€ã£ã¦ãã‚Œã‚‹

- 24æ™‚é–“ã®ç¯„å›²å†…ã§ã—ã‹ã§ããªã„äº¤æ›æ—¥è¨˜ã¿ãŸã„ãªæ„Ÿã˜ï¼Ÿ

- GCPã®ç„¡æ–™ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒå¤§é‡ã«ä½™ã£ã¦ã‚‹ã‹ã‚‰ã„ã‚ã‚“ãªã‚µãƒ¼ãƒ“ã‚¹è¡Œä½¿ã—ã¦ã¿ãŸã„  
  - Vertex AIã€ Firestoreã¨ã‹ï¼Ÿ  
  - Compute Engineã‚‚ä½¿ã£ã¦ã‚‚è‰¯ã•ãã†ï¼ˆã‚³ã‚¹ãƒ‘ã¯çŸ¥ã‚‰ã‚“ğŸ¤”ï¼‰  
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯å‰²ã¨é©å½“ã§ã‚‚å¤§ä¸ˆå¤«ãã†  
  - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å‡¦ç†ãŒãƒ¡ã‚¤ãƒ³

## æ·±å €ã‚Š

- 0:00ã«ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ãƒ«ãƒ¼ãƒ ã‚’ç”Ÿæˆã™ã‚‹

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**ï¼š
  - Vue.js 3 (TypeScript)
  - Vite (ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«)
  - Google Cloud | Firebase Authentication (åŒ¿åèªè¨¼)

- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**ï¼š  
  - FastAPI (Python)
  - WebSocket (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡)

- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**ï¼š  
  - Google Cloud |  Firestore (NoSQL)

- **AI**
  - Google Cloud | VertexAI Gemini 2.5 Pro (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ»åŒ¿ååŒ–)

- **ã‚¤ãƒ³ãƒ•ãƒ©**ï¼š
  - Google Cloud | Secret Manager (API Keyç®¡ç†)
  - Google Cloud | Cloud Run (ã‚³ãƒ³ãƒ†ãƒŠãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°)
  - Google Cloud | Cloud Build (CI/CD)
  - Docker (ã‚³ãƒ³ãƒ†ãƒŠåŒ–)
  - GitHub (ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç®¡ç†)

## é–‹ç™ºç’°å¢ƒ

### å‰ææ¡ä»¶
- Node.js 22+
- Python 3.11+
- UV (Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†)
- gcloud CLI
- Docker (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º
```bash
cd frontend/ikuchio-cup-2025
npm install
npm run dev  # http://localhost:5173
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™º
```bash
cd backend/ikuchio-cup-2025
uv sync
uv run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

### Firebaseè¨­å®š
1. Firebase Console ã§åŒ¿åèªè¨¼ã‚’æœ‰åŠ¹åŒ–
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‹ã‚‰Firebaseè¨­å®šã‚’å–å¾—
3. `frontend/ikuchio-cup-2025/src/firebase/config.ts` ã‚’æ›´æ–°

### Google Cloudè¨­å®š
```bash
# gcloud CLIèªè¨¼
gcloud auth login
gcloud config set project ikuchio-cup-2025

# Secret Managerè¨­å®š
echo "YOUR_GEMINI_API_KEY" | gcloud secrets create google-vertexai-api-key --data-file=-
```

### ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆGitHub pushæ™‚ï¼‰
git push origin main

# æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud builds submit --config cloudbuild.yaml .
```

## é‹ç”¨æƒ…å ±
### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### èªè¨¼
- ã™ã¹ã¦ã®APIã¯Firebase ID Tokenã«ã‚ˆã‚‹èªè¨¼ãŒå¿…è¦
- `Authorization: Bearer <firebase_id_token>` ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ä»˜ä¸

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§
```
POST /api/users
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»å–å¾—
  - Body: {"firebase_uid": "string"}
  - Response: User object

GET /api/users?firebase_uid={uid}
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
  - Response: User object

POST /api/room/{room_id}
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
  - Body: {"original_text": "string", "sender_id": "string"}
  - Response: Message object (AIå‡¦ç†å¾Œ)

GET /api/room/{room_id}
  - ãƒ«ãƒ¼ãƒ ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´å–å¾—
  - Response: Message[] array

WS /ws/{room_id}
  - WebSocketæ¥ç¶šï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ï¼‰
```

### ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ

#### User (Firestore: users/{user_id})
```typescript
{
  firebase_uid: string;     // FirebaseåŒ¿åèªè¨¼UID
  created_at: Timestamp;    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆæ—¥æ™‚
  room_id: string | null;   // å‚åŠ ä¸­ã®ãƒ«ãƒ¼ãƒ ID
}
```

#### Room (Firestore: rooms/{room_id})
```typescript
{
  id: string;              // room_{UUID}
  created_at: Timestamp;   // ãƒ«ãƒ¼ãƒ ä½œæˆæ—¥æ™‚
  users: string[];         // å‚åŠ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®firebase_uidé…åˆ—
}
```

#### Message (Firestore: messages/{message_id})
```typescript
{
  id: string;                    // turn_{UUID}
  room_id: string;               // æ‰€å±ãƒ«ãƒ¼ãƒ ID
  original_sender_id: string;    // é€ä¿¡è€…ã®firebase_uid
  original_text: string;         // å…ƒã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  processed_text: string;        // AIå‡¦ç†å¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  created_at: Timestamp;         // é€ä¿¡æ—¥æ™‚
  processed_at: Timestamp;       // AIå‡¦ç†å®Œäº†æ—¥æ™‚
}
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼] â†’ [Vue.js Frontend] â†’ [Firebase Auth] â†’ [Cloud Run Backend] â†’ [Firestore]
                    â†“                                        â†“
              [WebSocket]  â†  â†  â†  â†  â†  â†  â†  â†  [Gemini AI]
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- FirebaseåŒ¿åèªè¨¼ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥
- Firebase Admin SDKã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰èªè¨¼
- Gemini AIã«ã‚ˆã‚‹å€‹äººæƒ…å ±ã®è‡ªå‹•åŒ¿ååŒ–
- Secret Managerã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ç®¡ç†